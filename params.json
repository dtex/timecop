{"tagline":"Monitors Traffic Live to see if users have entered their time. If they are behind, a reminder email will be sent","body":"timecop.js\r\n==========\r\n\r\nA node app that will monitor Traffic Live via the API and send reminder emails when a user has not entered their hours.\r\n\r\nDocumented [source code](http://dtex.github.com/timecop/docs/timecop.html)\r\n\r\nI have only tested in node 0.6.18\r\n\r\n### We're definitely not working in node 0.8.x just yet! ###\r\n\r\n## Getting Started ##\r\n\r\nYou'll need node.js of course. Get it from [nodejs.org](http://nodejs.org).\r\n\r\nYou'll need libxml installed. Get it from [xmlsoft.org](http://www.xmlsoft.org/downloads.html).\r\n\r\nGrab the timecop files from the [downloads](https://github.com/dtex/timecop/downloads) and unzip to the folder where you would like for timecop to reside.\r\n\r\nFrom the command line run \"npm install\" inside the timecop folder.\r\n\r\n##Configure your install##\r\n\r\nRename sample-config.json to config.json and edit as described below.\r\n\r\n### API Configuration ###\r\n\r\nEnter your Traffic Live apiToken here\r\n\r\n    \"apiToken\": \"*********************\",\r\n\r\nThe email address from Traffic that is associated with the token\r\n\r\n    \"email\": \"apiuser@yourcommpany.com\",\r\n\r\n### SMTP Configuration ###\r\n\r\nEnter your SMTP server details\r\n\r\n    \"smtp\": {\r\n        \"host\": \"smtp.sendgrid.net\",\r\n        \"port\": \"587\",\r\n        \"user\": \"********\",\r\n        \"pass\": \"********\"\r\n    },\r\n\r\n### Job Scheduling ###\r\n\t\t\r\njobs is an array of job objects. Each job object consists of:\r\n schedule: a [cron formatted](http://www.nncron.ru/help/EN/working/cron-format.htm) string,\r\n type: Currently the only valid value is checkHours. We may add more types later,\r\n maxGap: The maximum allowable number of hours a user may fall bahind.\r\n\r\n     \"jobs\": [\r\n        {\r\n            \"schedule\": \"00 00 08 * * 2-6\",\r\n            \"type\": \"checkHours\",\r\n            \"maxGap\": 8\r\n        },\r\n        {\r\n            \"schedule\": \"00 00 [12,16] * * 2-6\",\r\n            \"type\": \"checkHours\",\r\n            \"maxGap\": 20\r\n        },\r\n        {\r\n            \"schedule\": \"00 00 20 * * 2-6\",\r\n            \"type\": \"checkHours\",\r\n            \"maxGap\": 40\r\n        }\r\n    ],\r\n\r\nThis example equates to:\r\n* Every M-F at 8am notify users who are more than 8 hours behind\r\n* Every M-F at noon and 4pm notify users who are more than 20 hours behind\r\n* Every M-F at 8pm notify users who are more than 40 hours behind\r\n\r\nBe sure to check the system time where timecop will be running. I spent more time than I care to admit debugging the job scheduler when it turned out that the system time was just wrong.\r\n\t\r\n### Email Templates ###\r\n\r\ntemplates is an object that contains all the templates used (currently only hours for jobs.type checkHours). This is the template for the email that will be sent to users. Feel free to make it as fancy as you like.\r\n\r\n    \"templates\": {\r\n        \"hours\": \"<p><b>Hi <span id=\\\"name\\\"></span>, you have billed <span id=\\\"minutes\\\"></span> hours so far this month</b></p><p><span id=\\\"billable\\\"></span> of those were billable.</p><p>You should have billed <span id=\\\"available\\\"></span> hours by now.</p>\"\r\n    }\r\n    \r\nThis span will be populated with the user's full name.\r\n\r\n    <span id=\\\"name\\\"></span> \r\n\r\nThis span will contain the number of hours billed so far.\r\n\r\n    <span id=\\\"minutes\\\"></span>\r\n\r\nThis span will contain the number of billable hours billed so far.\r\n\r\n    <span id=\\\"billable\\\"></span>\r\n\r\nThis span will contain the number of hours that should have been billed by the end of the previous day.\r\n    \r\n    <span id=\\\"available\\\"></span>\r\n    \r\n## Running the app ##\r\n\t\r\nFrom the command line run \"node timecop\". Node will run as a process until the current terminal session has ended.\r\n\r\nRunning \"node timecop --mode test\" will do the same, but will trigger an immediate time check with a maxGap of 8, regardless of the schedule and will only send an email to the Traffic API user (not to all users).\r\n\r\nRunning \"node timecop --mode daemon\" will run timecop as a daemon so that it stays running even after the current terminal session has ended. It will NOT restart timecop if timecop or the server crashes for some reason.","name":"Timecop","note":"Don't delete this file! It's used internally to help with page regeneration.","google":""}